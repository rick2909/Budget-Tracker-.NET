@inject IJSRuntime JSRuntime

<div class="income-expenses-section">
    <div class="section-header">
        <h2 class="section-title">Income vs Expenses</h2>
        <div class="growth-indicator">
            <span>This Month</span>
            <span style="color: var(--accent-green);">+@GrowthPercentage%</span>
        </div>
    </div>
    
    <div class="amount-display">
        @FormatCurrency(IncomeVsExpenses)
    </div>
    
    <div class="chart-container">
        <canvas id="incomeExpensesChart" width="400" height="200"></canvas>
    </div>
</div>

@code {
    [Parameter] public decimal IncomeVsExpenses { get; set; } = 5678m;
    [Parameter] public decimal GrowthPercentage { get; set; } = 12m;
    
    private readonly List<ChartDataPoint> _chartData = new()
    {
        new("Jan", 4200, 3800),
        new("Feb", 3900, 3600),
        new("Mar", 3200, 3100),
        new("Apr", 4800, 4200),
        new("May", 3600, 3400),
        new("Jun", 5200, 4800),
        new("Jul", 5400, 5000)
    };
    
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await InitializeChart();
        }
    }
    
    private async Task InitializeChart()
    {
        await JSRuntime.InvokeVoidAsync("initializeIncomeExpensesChart", 
            "incomeExpensesChart", _chartData);
    }
    
    private string FormatCurrency(decimal amount)
    {
        return amount.ToString("C0");
    }
    
    public record ChartDataPoint(string Month, decimal Income, 
                                decimal Expenses);
}
